{"version":3,"file":"bundle.f36df7904f014ab2f4f9.js","mappings":"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","sources":["webpack://big-trip/./src/render/render.js","webpack://big-trip/./src/render/view/abstract.js","webpack://big-trip/./src/view/sort.js","webpack://big-trip/./src/const.js","webpack://big-trip/./src/render/view/abstract-stateful.js","webpack://big-trip/./src/view/waypoint-edit.js","webpack://big-trip/./src/util.js","webpack://big-trip/./src/view/waypoint.js","webpack://big-trip/./src/presenter/waypoint.js","webpack://big-trip/./src/presenter/new-waypoint-presenter.js","webpack://big-trip/./src/view/loading.js","webpack://big-trip/./src/view/waypoint-list.js","webpack://big-trip/./src/view/no-waypoint.js","webpack://big-trip/./src/render/observable.js","webpack://big-trip/./src/view/trip-info.js","webpack://big-trip/./src/view/filter.js","webpack://big-trip/./src/main.js","webpack://big-trip/./src/model/waypoints.js","webpack://big-trip/./src/mock/offer.js","webpack://big-trip/./src/mock/destionation.js","webpack://big-trip/./src/mock/waypoint.js","webpack://big-trip/./src/model/filter.js","webpack://big-trip/./src/model/sort.js","webpack://big-trip/./src/presenter/trip-info.js","webpack://big-trip/./src/presenter/filter.js","webpack://big-trip/./src/presenter/sort.js","webpack://big-trip/./src/presenter/waypoint-list.js"],"sourcesContent":["import AbstractView from './view/abstract';\n\nconst RenderPosition = {\n  BEFOREBEGIN: 'beforebegin',\n  AFTERBEGIN: 'afterbegin',\n  BEFOREEND: 'beforeend',\n  AFTEREND: 'afterend',\n};\n\nconst createElement = (template) => {\n  const newElement = document.createElement('div');\n  newElement.innerHTML = template;\n\n  return newElement.firstElementChild;\n};\n\nconst render = (component, container, place = RenderPosition.BEFOREEND) => {\n  container.insertAdjacentElement(place, component.element);\n};\n\nconst replace = (newComponent, oldComponent) => {\n  if (\n    !(\n      newComponent instanceof AbstractView &&\n      oldComponent instanceof AbstractView\n    )\n  ) {\n    throw new Error('Can replace only components');\n  }\n\n  const newElement = newComponent.element;\n  const oldElement = oldComponent.element;\n  const parent = oldElement.parentElement;\n\n  if (!parent) {\n    throw new Error('Parent element doesn\\'t exist');\n  }\n\n  parent.replaceChild(newElement, oldElement);\n};\n\nconst remove = (component) => {\n  if (!component) {\n    return;\n  }\n\n  if (!(component instanceof AbstractView)) {\n    throw new Error('Can remove only component');\n  }\n\n  component.element.remove();\n  component.removeElement();\n};\n\nexport { RenderPosition, createElement, render, replace, remove };\n","import { createElement } from '../render.js';\n\nexport default class AbstractView {\n  #element = null;\n\n  constructor() {\n    if (new.target === AbstractView) {\n      throw new Error('Can\\'t instantiate Abstract, only concrete one.');\n    }\n  }\n\n  get element() {\n    if (!this.#element) {\n      this.#element = createElement(this.template);\n    }\n\n    return this.#element;\n  }\n\n  get template() {\n    throw new Error('Abstract method not implemented: get template');\n  }\n\n  removeElement() {\n    this.#element = null;\n  }\n}\n","import AbstractView from '../render/view/abstract.js';\n\nconst createSortItemTemplate = (sortTypes, sortItem, currentSort) =>\n  `<div class=\"trip-sort__item  trip-sort__item--${sortItem}\">\n    <input\n    id=\"sort-${sortItem}\"\n    class=\"trip-sort__input visually-hidden\"\n    type=\"radio\"\n    name=\"trip-sort\"\n    value=\"sort-${sortItem}\"\n    ${sortItem === currentSort ? 'checked' : ''}\n    ${!sortTypes.includes(sortItem) ? 'disabled' : ''}\n  >\n    <label class=\"trip-sort__btn\" for=\"sort-${sortItem}\">${sortItem}</label>\n  </div>`;\n\nconst createSortTemplate = (sortTypes, sortItems, currentSort) => {\n  const sortItemsTemplate = sortItems.reduce(\n    (template, sortItem) =>\n      `${template} ${createSortItemTemplate(sortTypes, sortItem, currentSort)}`,\n    ''\n  );\n\n  return `<form class=\"trip-events__trip-sort  trip-sort\" action=\"#\" method=\"get\">\n      ${sortItemsTemplate}\n    </form>`;\n};\n\nexport default class SortView extends AbstractView {\n  #sortTypes = null;\n  #currentSort = null;\n  #sortItems = null;\n  #handleSortChange = null;\n\n  constructor({ sortTypes, sortItems, currentSort, onSortChange }) {\n    super();\n    this.#sortTypes = sortTypes;\n    this.#sortItems = sortItems;\n    this.#currentSort = currentSort;\n    this.#handleSortChange = onSortChange;\n\n    this.element.addEventListener('change', this.#sortChangeHandler);\n  }\n\n  get template() {\n    return createSortTemplate(\n      this.#sortTypes,\n      this.#sortItems,\n      this.#currentSort\n    );\n  }\n\n  #sortChangeHandler = (event) => {\n    event.preventDefault();\n    const sortType = event.target.value.split('-')[1];\n    this.#handleSortChange(sortType);\n  };\n}\n","const FilterType = {\n  EVERYTHING: 'everything',\n  FUTURE: 'future',\n  PRESENT: 'present',\n  PAST: 'past',\n};\n\nconst SortType = {\n  DAY: 'day',\n  TIME: 'time',\n  PRICE: 'price',\n};\n\nconst SortItems = {\n  DAY: 'day',\n  EVENT: 'event',\n  TIME: 'time',\n  PRICE: 'price',\n  OFFERS: 'offers',\n};\n\nconst TimeUnits = {\n  DAYS: 'D',\n  HOURS: 'H',\n  MINUTES: 'M',\n};\n\nconst UpdateType = {\n  PATCH: 'PATCH',\n  MINOR: 'MINOR',\n  MAJOR: 'MAJOR',\n  INIT: 'INIT',\n};\n\nconst UserAction = {\n  ADD_WAYPOINT: 'ADD_WAYPOINT',\n  DELETE_WAYPOINT: 'DELETE_WAYPOINT',\n  UPDATE_WAYPOINT: 'UPDATE_WAYPOINT',\n};\n\nexport { FilterType, TimeUnits, SortType, SortItems, UpdateType, UserAction };\n","import AbstractView from './abstract.js';\n\nexport default class AbstractStatefulView extends AbstractView {\n  _state = {};\n\n  updateElement(update) {\n    if (!update) {\n      return;\n    }\n\n    this._setState(update);\n    this.#rerenderElement();\n  }\n\n  _restoreHandlers() {\n    throw new Error('Abstract method not implemented: restoreHandlers');\n  }\n\n  _setState(update) {\n    this._state = structuredClone({ ...this._state, ...update });\n  }\n\n  #rerenderElement() {\n    const prevElement = this.element;\n    const parent = prevElement.parentElement;\n\n    this.removeElement();\n\n    const newElement = this.element;\n\n    parent.replaceChild(newElement, prevElement);\n\n    this._restoreHandlers();\n  }\n}\n","import AbstractStatefulView from '../render/view/abstract-stateful.js';\n\nconst BLANK_WAYPOINT = {\n  basePrice: 0,\n  dateFrom: '',\n  dateTo: '',\n  destination: '',\n  isFavorite: false,\n  offers: [],\n  type: 'flight',\n};\n\nconst createEventTypeItemTemplate = (eventType) =>\n  `<div class=\"event__type-item\">\n    <input id=\"event-type-${eventType}-1\" class=\"event__type-input  visually-hidden\" type=\"radio\" name=\"event-type\" value=\"${eventType}\">\n    <label class=\"event__type-label  event__type-label--${eventType}\" for=\"event-type-${eventType}-1\">${eventType}</label>\n  </div>`;\n\nconst createEventTypeItemsTemplate = (eventTypes) =>\n  eventTypes.reduce(\n    (template, eventType) =>\n      `${template} ${createEventTypeItemTemplate(eventType)}`,\n    ''\n  );\n\nconst createDestinationListItemTemplate = (destinations) =>\n  destinations.reduce(\n    (template, destination) =>\n      `${template} <option value=\"${destination}\"></option>`,\n    ''\n  );\n\nconst createDestinationList = (destinations) =>\n  `<datalist id=\"destination-list-1\">\n    ${createDestinationListItemTemplate(destinations)}\n  </datalist>`;\n\nconst createOfferTemplate = (waypoint, offer) => {\n  const offersChecked = waypoint.offers.includes(offer.id) ? 'checked' : '';\n  return `<div class=\"event__offer-selector\">\n      <input class=\"event__offer-checkbox  visually-hidden\" id=\"${offer.id}\" type=\"checkbox\" name=\"${offer.id}\" ${offersChecked}>\n      <label class=\"event__offer-label\" for=\"${offer.id}\">\n        <span class=\"event__offer-title\">${offer.title}</span>\n        &plus;&euro;&nbsp;\n        <span class=\"event__offer-price\">${offer.price}</span>\n      </label>\n    </div>`;\n};\n\nconst createOffersTemplate = (waypoint, offers) => {\n  if (!offers.length) {\n    return '';\n  }\n\n  const offersTemplate = offers.reduce(\n    (template, offer) => template + createOfferTemplate(waypoint, offer),\n    ''\n  );\n  return `<section class=\"event__section  event__section--offers\">\n      <h3 class=\"event__section-title  event__section-title--offers\">Offers</h3>\n      <div class=\"event__available-offers\">\n        ${offersTemplate}\n      </div>\n    </section>`;\n};\n\nconst createDestinationPhotoTemplate = (photo) =>\n  `<img class=\"event__photo\" src=\"${photo.src}\" alt=\"${photo.description}\">`;\n\nconst createDestinationPhotosTemplate = (pictures) => {\n  if (!pictures.length) {\n    return '';\n  }\n  const photos = pictures.reduce(\n    (template, photo) => `${template} ${createDestinationPhotoTemplate(photo)}`,\n    ''\n  );\n  return `<div class=\"event__photos-container\">\n      <div class=\"event__photos-tape\">\n        ${photos}\n      </div>\n    </div>`;\n};\n\nconst createDestinationDescriptionTemplate = (description) => {\n  if (!description) {\n    return '';\n  }\n\n  return `<p class=\"event__destination-description\">${description}</p>`;\n};\n\nconst createDestinationContainerTemplate = (destination) => {\n  if (\n    !destination ||\n    (!destination.pictures.length && !destination.description)\n  ) {\n    return '';\n  }\n\n  return `<section class=\"event__section  event__section--destination\">\n      <h3 class=\"event__section-title  event__section-title--destination\">Destination</h3>\n      ${createDestinationDescriptionTemplate(destination.description)}\n      ${createDestinationPhotosTemplate(destination.pictures)}\n    </section>`;\n};\n\nconst createRollupButton = (waypoint) => {\n  if (!waypoint.id) {\n    return '';\n  }\n  return `<button class=\"event__rollup-btn\" type=\"button\">\n      <span class=\"visually-hidden\">Open event</span>\n    </button>`;\n};\n\nconst createWaypointEditTemplate = (waypoint, offers, destinations) => {\n  const eventTypes = offers.map((offer) => offer.type);\n  const waypointDestination = destinations.filter(\n    (dest) => dest.id === waypoint.destination\n  )[0];\n\n  const destinationsNames = destinations.map((dest) => dest.name);\n  const waypointOffers = offers.filter(\n    (offer) => offer.type === waypoint.type\n  )[0].offers;\n\n  const startDate = waypoint.dateFrom\n    .toLocaleString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n      day: '2-digit',\n      month: '2-digit',\n      year: '2-digit',\n    })\n    .split(',')\n    .join('');\n  const endDate = waypoint.dateTo\n    .toLocaleString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n      day: '2-digit',\n      month: '2-digit',\n      year: '2-digit',\n    })\n    .split(',')\n    .join('');\n  return `<li class=\"trip-events__item\">\n      <form class=\"event event--edit\" action=\"#\" method=\"post\">\n        <header class=\"event__header\">\n          <div class=\"event__type-wrapper\">\n            <label class=\"event__type  event__type-btn\" for=\"event-type-toggle-1\">\n              <span class=\"visually-hidden\">Choose event type</span>\n              <img\n              class=\"event__type-icon\"\n              width=\"17\"\n              height=\"17\"\n              src=\"img/icons/${waypoint.type}.png\" alt=\"Event type icon\"\n              >\n            </label>\n            <input class=\"event__type-toggle  visually-hidden\" id=\"event-type-toggle-1\" type=\"checkbox\">\n\n            <div class=\"event__type-list\">\n              <fieldset class=\"event__type-group\">\n                <legend class=\"visually-hidden\">Event type</legend>\n\n                ${createEventTypeItemsTemplate(eventTypes)}\n\n              </fieldset>\n            </div>\n          </div>\n\n          <div class=\"event__field-group  event__field-group--destination\">\n            <label class=\"event__label  event__type-output\" for=\"event-destination-1\">\n              ${waypoint.type}\n            </label>\n            <input\n            class=\"event__input\n            event__input--destination\"\n            id=\"event-destination-1\"\n            type=\"text\"\n            name=\"event-destination\"\n            value=\"${waypointDestination?.name || ''}\" list=\"destination-list-1\"\n            >\n            ${createDestinationList(destinationsNames)}\n          </div>\n\n          <div class=\"event__field-group  event__field-group--time\">\n            <label class=\"visually-hidden\" for=\"event-start-time-1\">From</label>\n            <input class=\"event__input  event__input--time\" id=\"event-start-time-1\" type=\"text\" name=\"event-start-time\" value=\"${startDate}\">\n            &mdash;\n            <label class=\"visually-hidden\" for=\"event-end-time-1\">To</label>\n            <input class=\"event__input  event__input--time\" id=\"event-end-time-1\" type=\"text\" name=\"event-end-time\" value=\"${endDate}\">\n          </div>\n\n          <div class=\"event__field-group  event__field-group--price\">\n            <label class=\"event__label\" for=\"event-price-1\">\n              <span class=\"visually-hidden\">Price</span>\n              &euro;\n            </label>\n            <input\n            class=\"event__input\n            event__input--price\"\n            id=\"event-price-1\"\n            type=\"text\"\n            name=\"event-price\"\n            value=\"${waypoint.basePrice}\"\n            >\n          </div>\n\n          <button class=\"event__save-btn  btn  btn--blue\" type=\"submit\">Save</button>\n          <button class=\"event__reset-btn\" type=\"reset\">Delete</button>\n          ${createRollupButton(waypoint)}\n\n        </header>\n        <section class=\"event__details\">\n          ${createOffersTemplate(waypoint, waypointOffers)}\n\n          ${createDestinationContainerTemplate(waypointDestination)}\n        </section>\n      </form>\n    </li>`;\n};\n\nexport default class WaypointEditView extends AbstractStatefulView {\n  #handleRollupClick = null;\n  #handleFormSubmit = null;\n  #handleDeleteClick = null;\n\n  constructor({\n    waypoint = BLANK_WAYPOINT,\n    offers,\n    destinations,\n    onRollupClick,\n    onFormSubmit,\n    onFormDeleteClick,\n  }) {\n    super();\n    this._setState(WaypointEditView.parseWaypointToState(waypoint));\n    this.waypoint = waypoint;\n    this.offers = offers;\n    this.destinations = destinations;\n    this.#handleRollupClick = onRollupClick;\n    this.#handleFormSubmit = onFormSubmit;\n    this.#handleDeleteClick = onFormDeleteClick;\n\n    this._restoreHandlers();\n  }\n\n  get template() {\n    return createWaypointEditTemplate(\n      this._state,\n      this.offers,\n      this.destinations\n    );\n  }\n\n  reset(waypoint) {\n    this.updateElement(WaypointEditView.parseWaypointToState(waypoint));\n  }\n\n  _restoreHandlers() {\n    this.element\n      .querySelector('form')\n      .addEventListener('submit', this.#formSubmitHandler);\n    this.element\n      .querySelector('.event__reset-btn')\n      .addEventListener('click', this.#formDeleteClickHandler);\n    this.element\n      .querySelector('.event__type-group')\n      .addEventListener('change', this.#eventTypeChangeHandler);\n    this.element\n      .querySelector('.event__input--destination')\n      .addEventListener('change', this.#destinationChangeHandler);\n    this.element\n      .querySelector('.event--edit')\n      .addEventListener('change', this.#offersChangeHandler);\n    this.element\n      .querySelector('.event__input--price')\n      .addEventListener('input', this.#priceInputHandler);\n    this.element\n      .querySelector('#event-start-time-1')\n      .addEventListener('input', this.#dateChangeHandler);\n    this.element\n      .querySelector('#event-end-time-1')\n      .addEventListener('input', this.#dateChangeHandler);\n\n    if (this.#handleRollupClick) {\n      this.element\n        .querySelector('.event__rollup-btn')\n        .addEventListener('click', this.#rollupClickHandler);\n    }\n  }\n\n  #rollupClickHandler = (event) => {\n    event.preventDefault();\n    this.#handleRollupClick();\n  };\n\n  #eventTypeChangeHandler = (event) => {\n    event.preventDefault();\n    this.updateElement({\n      type: event.target.value,\n      offers: [],\n    });\n  };\n\n  #destinationChangeHandler = (event) => {\n    event.preventDefault();\n    const destinationName = event.target.value;\n    const destinationId = this.destinations.filter(\n      (destination) => destination.name === destinationName\n    )[0].id;\n    this.updateElement({\n      destination: destinationId,\n    });\n  };\n\n  #offersChangeHandler = (event) => {\n    if (event.target.classList.contains('event__offer-checkbox')) {\n      event.preventDefault();\n\n      const checkedOffers = [\n        ...this.element.querySelectorAll('.event__offer-checkbox'),\n      ]\n        .filter((offer) => offer.checked)\n        .map((offer) => offer.id);\n\n      this.updateElement({ offers: checkedOffers });\n    }\n  };\n\n  #priceInputHandler = (event) => {\n    event.preventDefault();\n    this._setState({ basePrice: +event.target.value });\n  };\n\n  #dateChangeHandler = (event) => {\n    if (event.target.id === 'event-start-time-1') {\n      this._setState({ dateFrom: new Date(event.target.value) });\n    }\n    if (event.target.id === 'event-end-time-1') {\n      this._setState({ dateTo: new Date(event.target.value) });\n    }\n  };\n\n  #formSubmitHandler = (event) => {\n    event.preventDefault();\n\n    this.#handleFormSubmit(WaypointEditView.parseStateToWaypoint(this._state));\n  };\n\n  #formDeleteClickHandler = (event) => {\n    event.preventDefault();\n    this.#handleDeleteClick(WaypointEditView.parseStateToWaypoint(this._state));\n  };\n\n  static parseWaypointToState(waypoint) {\n    const state = { ...waypoint };\n\n    state.isSaving = false;\n    state.isDisabled = false;\n    state.isDeleting = false;\n\n    return state;\n  }\n\n  static parseStateToWaypoint(state) {\n    const waypoint = { ...state };\n\n    delete waypoint.isSaving;\n    delete waypoint.isDisabled;\n    delete waypoint.isDeleting;\n\n    return waypoint;\n  }\n}\n","import { TimeUnits } from './const.js';\nimport { FilterType, SortType } from './const.js';\n\nconst durationInTimeUnits = {\n  [TimeUnits.DAYS]: (durationInMiliseconds) =>\n    Math.floor(durationInMiliseconds / (1000 * 60 * 60 * 24)),\n  [TimeUnits.HOURS]: (durationInMiliseconds) =>\n    Math.floor((durationInMiliseconds / (1000 * 60 * 60)) % 24),\n  [TimeUnits.MINUTES]: (durationInMiliseconds) =>\n    Math.floor((durationInMiliseconds / (1000 * 60)) % 60),\n};\n\nconst getTimeDifference = (durationInMiliseconds, unit) => {\n  let duration = durationInTimeUnits[unit](durationInMiliseconds);\n\n  if (duration < 1) {\n    duration = '';\n  } else if (duration < 10) {\n    duration = `0${duration}${unit}`;\n  } else {\n    duration = `${duration}${unit}`;\n  }\n\n  return duration;\n};\n\nconst getDuration = (eventDate, eventEndDate) => {\n  const durationInMiliseconds = eventEndDate - eventDate;\n\n  const duration = Object.values(TimeUnits).reduce((result, unit) => {\n    let currentUnitDuration = getTimeDifference(durationInMiliseconds, unit);\n\n    if (result.trim() !== '' && !currentUnitDuration) {\n      currentUnitDuration = `00${unit}`;\n    }\n\n    return `${result} ${currentUnitDuration}`;\n  }, '');\n\n  return duration;\n};\n\nconst filter = {\n  [FilterType.EVERYTHING]: (waypoints) =>\n    waypoints.filter((waypoint) => waypoint),\n  [FilterType.FUTURE]: (waypoints) =>\n    waypoints.filter((waypoint) => waypoint.dateFrom > new Date()),\n  [FilterType.PRESENT]: (waypoints) =>\n    waypoints.filter(\n      (waypoint) =>\n        waypoint.dateFrom <= new Date() && waypoint.dateTo >= new Date()\n    ),\n  [FilterType.PAST]: (waypoints) =>\n    waypoints.filter((waypoint) => waypoint.dateTo < new Date()),\n};\n\nconst sort = {\n  [SortType.DAY]: (waypointA, waypointB) =>\n    waypointA.dateFrom - waypointB.dateFrom,\n  [SortType.TIME]: (waypointA, waypointB) => {\n    const durationA = waypointA.dateTo - waypointA.dateFrom;\n    const durationB = waypointB.dateTo - waypointB.dateFrom;\n\n    return durationB - durationA;\n  },\n  [SortType.PRICE]: (waypointA, waypointB) =>\n    waypointB.basePrice - waypointA.basePrice,\n};\n\nexport { getDuration, filter, sort };\n","import AbstractView from '../render/view/abstract.js';\nimport { getDuration } from '../util.js';\n\nconst createOffersListItemTemplate = ({ title, price }) =>\n  `<li class=\"event__offer\">\n    <span class=\"event__offer-title\">${title}</span>\n      &plus;&euro;&nbsp;\n    <span class=\"event__offer-price\">${price}</span>\n  </li>`;\n\nconst createOffersListTemplate = (offers) => {\n  if (!offers.length) {\n    return '';\n  }\n\n  const offersListItemsTemplate = offers.reduce(\n    (template, offer) => `${template} ${createOffersListItemTemplate(offer)}`,\n    ''\n  );\n\n  return `<ul class=\"event__selected-offers\">\n      ${offersListItemsTemplate}\n    </ul>`;\n};\n\nconst createWaypointTemplate = (waypoint, offers, destinations) => {\n  const date = waypoint.dateFrom.toISOString().slice(0, 10);\n  const startDateTime = waypoint.dateFrom.toISOString().slice(0, 16);\n  const endDateTime = waypoint.dateTo.toISOString().slice(0, 16);\n  const startTime = waypoint.dateFrom.toISOString().slice(11, 16);\n  const endTime = waypoint.dateTo.toISOString().slice(11, 16);\n  const duration = getDuration(waypoint.dateFrom, waypoint.dateTo);\n  const isFavorite = waypoint.isFavorite;\n  const favoriteClassName = isFavorite ? 'event__favorite-btn--active' : '';\n  const price = waypoint.basePrice;\n  const type = waypoint.type;\n\n  const waypointDestination = destinations.filter(\n    (destination) => destination.id === waypoint.destination\n  )[0];\n  const destinationName = waypointDestination.name;\n  const day = waypoint.dateFrom.toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n  });\n\n  const waypointOffers = offers.filter(\n    (offer) => offer.type === waypoint.type\n  )[0].offers;\n\n  const selectedOffers = waypointOffers.filter((offer) =>\n    waypoint.offers.includes(offer.id)\n  );\n\n  return `<li class=\"trip-events__item\">\n      <div class=\"event\">\n        <time class=\"event__date\" datetime=\"${date}\">${day}</time>\n        <div class=\"event__type\">\n          <img class=\"event__type-icon\" width=\"42\" height=\"42\" src=\"img/icons/${type}.png\" alt=\"Event type icon\">\n        </div>\n        <h3 class=\"event__title\">${type} ${destinationName}</h3>\n        <div class=\"event__schedule\">\n          <p class=\"event__time\">\n            <time class=\"event__start-time\" datetime=\"${startDateTime}\">${startTime}</time>\n            &mdash;\n            <time class=\"event__end-time\" datetime=\"${endDateTime}\">${endTime}</time>\n          </p>\n          <p class=\"event__duration\">${duration}</p>\n        </div>\n        <p class=\"event__price\">\n          &euro;&nbsp;<span class=\"event__price-value\">${price}</span>\n        </p>\n        <h4 class=\"visually-hidden\">Offers:</h4>\n        ${createOffersListTemplate(selectedOffers)}\n        <button class=\"event__favorite-btn ${favoriteClassName}\" type=\"button\">\n          <span class=\"visually-hidden\">Add to favorite</span>\n          <svg class=\"event__favorite-icon\" width=\"28\" height=\"28\" viewBox=\"0 0 28 28\">\n            <path d=\"M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z\"/>\n          </svg>\n        </button>\n        <button class=\"event__rollup-btn\" type=\"button\">\n          <span class=\"visually-hidden\">Open event</span>\n        </button>\n      </div>\n    </li>`;\n};\n\nexport default class WaypointView extends AbstractView {\n  #waypoint = null;\n  #offers = null;\n  #destinations = null;\n  #handleRollupClick = null;\n  #handleFavoriteClick = null;\n\n  constructor({\n    waypoint,\n    offers,\n    destinations,\n    onRollupClick,\n    onFavoriteClick,\n  }) {\n    super();\n    this.#waypoint = waypoint;\n    this.#destinations = destinations;\n    this.#offers = offers;\n    this.#handleRollupClick = onRollupClick;\n    this.#handleFavoriteClick = onFavoriteClick;\n\n    this.element\n      .querySelector('.event__rollup-btn')\n      .addEventListener('click', this.#rollupClickHandler);\n    this.element\n      .querySelector('.event__favorite-btn')\n      .addEventListener('click', this.#favoriteClickHandler);\n  }\n\n  get template() {\n    return createWaypointTemplate(\n      this.#waypoint,\n      this.#offers,\n      this.#destinations\n    );\n  }\n\n  #rollupClickHandler = (event) => {\n    event.preventDefault();\n    this.#handleRollupClick();\n  };\n\n  #favoriteClickHandler = (event) => {\n    event.preventDefault();\n    this.#handleFavoriteClick();\n  };\n}\n","import { UpdateType, UserAction } from '../const.js';\nimport { remove, render, replace } from '../render/render.js';\nimport WaypointEditView from '../view/waypoint-edit.js';\nimport WaypointView from '../view/waypoint.js';\n\nconst Mode = {\n  DEFAULT: 'DEFAULT',\n  EDITING: 'EDITING',\n};\n\nexport default class WaypointPresenter {\n  #waypointListContainer = null;\n\n  #waypointComponent = null;\n  #waypointEditComponent = null;\n\n  #waypoint = null;\n  #offers = null;\n  #destinations = null;\n  #handleDataChange = null;\n  #handleModeChange = null;\n\n  #mode = Mode.DEFAULT;\n\n  constructor({ waypointListContainer, onDataChange, onModeChange }) {\n    this.#waypointListContainer = waypointListContainer;\n    this.#handleDataChange = onDataChange;\n    this.#handleModeChange = onModeChange;\n  }\n\n  init({ waypoint, offers, destinations }) {\n    this.#waypoint = waypoint;\n    this.#offers = offers || this.#offers;\n    this.#destinations = destinations || this.#destinations;\n\n    const prevWaypointComponent = this.#waypointComponent;\n    const prevWaypointEditComponent = this.#waypointEditComponent;\n\n    this.#waypointComponent = new WaypointView({\n      waypoint: this.#waypoint,\n      offers: this.#offers,\n      destinations: this.#destinations,\n      onRollupClick: this.#handleRollupClick,\n      onFavoriteClick: this.#handleFavoriteClick,\n    });\n    this.#waypointEditComponent = new WaypointEditView({\n      waypoint: this.#waypoint,\n      offers: this.#offers,\n      destinations: this.#destinations,\n      onRollupClick: this.#handleRollupClick,\n      onFormSubmit: this.#handleFormSubmit,\n      onFormDeleteClick: this.#handleFormDeleteClick,\n    });\n\n    if (prevWaypointComponent === null && prevWaypointEditComponent === null) {\n      render(this.#waypointComponent, this.#waypointListContainer);\n      return;\n    }\n\n    if (this.#mode === Mode.DEFAULT) {\n      replace(this.#waypointComponent, prevWaypointComponent);\n    }\n\n    if (this.#mode === Mode.EDITING) {\n      replace(this.#waypointComponent, prevWaypointEditComponent);\n      this.#mode = Mode.DEFAULT;\n    }\n\n    remove(prevWaypointComponent);\n    remove(prevWaypointEditComponent);\n  }\n\n  destroy() {\n    remove(this.#waypointComponent);\n    remove(this.#waypointEditComponent);\n  }\n\n  setSaving() {\n    if (this.#mode === Mode.EDITING) {\n      this.#waypointEditComponent.updateElement({\n        isDisabled: true,\n        isSaving: true,\n      });\n    }\n  }\n\n  setDeleting() {\n    if (this.#mode === Mode.EDITING) {\n      this.#waypointEditComponent.updateElement({\n        isDisabled: true,\n        isDeleting: true,\n      });\n    }\n  }\n\n  resetView() {\n    if (this.#mode !== Mode.DEFAULT) {\n      this.#waypointEditComponent.reset(this.#waypoint);\n      this.#replaceFormToCard();\n    }\n  }\n\n  #escKeyDownHandler = (event) => {\n    if (event.key === 'Escape' || event.key === 'Esc') {\n      event.preventDefault();\n      this.#waypointEditComponent.reset(this.#waypoint);\n      this.#replaceFormToCard();\n    }\n  };\n\n  #handleRollupClick = () => {\n    if (this.#mode === Mode.DEFAULT) {\n      this.#replaceCardToForm();\n      return;\n    }\n\n    this.#waypointEditComponent.reset(this.#waypoint);\n    this.#replaceFormToCard();\n  };\n\n  #handleFavoriteClick = () => {\n    this.#handleDataChange(UserAction.UPDATE_WAYPOINT, UpdateType.PATCH, {\n      ...this.#waypoint,\n      isFavorite: !this.#waypoint.isFavorite,\n    });\n  };\n\n  #handleFormSubmit = (update) => {\n    this.#handleDataChange(\n      UserAction.UPDATE_WAYPOINT,\n      UpdateType.MINOR,\n      update\n    );\n  };\n\n  #handleFormDeleteClick = (waypoint) => {\n    this.#handleDataChange(\n      UserAction.DELETE_WAYPOINT,\n      UpdateType.MINOR,\n      waypoint\n    );\n  };\n\n  #replaceCardToForm() {\n    replace(this.#waypointEditComponent, this.#waypointComponent);\n    document.addEventListener('keydown', this.#escKeyDownHandler);\n    this.#handleModeChange();\n    this.#mode = Mode.EDITING;\n  }\n\n  #replaceFormToCard() {\n    replace(this.#waypointComponent, this.#waypointEditComponent);\n    document.removeEventListener('keydown', this.#escKeyDownHandler);\n    this.#mode = Mode.DEFAULT;\n  }\n}\n","import { remove, render, RenderPosition } from '../render/render.js';\nimport WaypointEditView from '../view/waypoint-edit.js';\nimport { UpdateType, UserAction } from '../const.js';\n\nexport default class newWaypointPresenter {\n  #waypointListContainer = null;\n\n  #waypointEditComponent = null;\n\n  #handleDataChange = null;\n  #handleDestroy = null;\n\n  constructor({ waypointListContainer, onDataChange, onDestroy }) {\n    this.#waypointListContainer = waypointListContainer;\n    this.#handleDataChange = onDataChange;\n    this.#handleDestroy = onDestroy;\n  }\n\n  init({ offers, destinations }) {\n    if (this.#waypointEditComponent) {\n      return;\n    }\n\n    this.#waypointEditComponent = new WaypointEditView({\n      offers,\n      destinations,\n      isNewWaypoint: true,\n      onFormSubmit: this.#handleFormSubmit,\n      onFormDeleteClick: this.#handleFormDeleteClick,\n    });\n\n    render(\n      this.#waypointEditComponent,\n      this.#waypointListContainer.querySelector('.trip-events__list'),\n      RenderPosition.AFTERBEGIN\n    );\n\n    document.addEventListener('keydown', this.#escKeyDownHandler);\n  }\n\n  destroy() {\n    if (!this.#waypointEditComponent) {\n      return;\n    }\n\n    this.#handleDestroy();\n\n    remove(this.#waypointEditComponent);\n    this.#waypointEditComponent = null;\n\n    document.removeEventListener('keydown', this.#escKeyDownHandler);\n  }\n\n  setSaving() {\n    this.#waypointEditComponent.updeteElement({\n      isDisabled: true,\n      isSaving: true,\n    });\n  }\n\n  #handleFormSubmit = (waypoint) => {\n    this.#handleDataChange(UserAction.ADD_WAYPOINT, UpdateType.MINOR, waypoint);\n  };\n\n  #handleFormDeleteClick = () => {\n    this.destroy();\n  };\n\n  #escKeyDownHandler = (event) => {\n    if (event.key === 'Escape' || event.key === 'Esc') {\n      event.preventDefault();\n      this.destroy();\n    }\n  };\n}\n","import AbstractView from '../render/view/abstract.js';\n\nconst createLoadingTemplate = () =>\n  '<p class=\"trip-events__msg\">Loading...</p>';\n\nexport default class LoadingView extends AbstractView {\n  get template() {\n    return createLoadingTemplate();\n  }\n}\n","import AbstractView from '../render/view/abstract.js';\n\nconst createWaypointListTemplate = () => '<ul class=\"trip-events__list\"></ul>';\n\nexport default class WaypointListView extends AbstractView {\n  get template() {\n    return createWaypointListTemplate();\n  }\n}\n","import AbstractView from '../render/view/abstract.js';\nimport { FilterType } from '../const.js';\n\nconst NoWaypointTextType = {\n  [FilterType.EVERYTHING]: 'Click New Event to create your first point',\n  [FilterType.FUTURE]: 'There are no future events now',\n  [FilterType.PRESENT]: 'There are no present events now',\n  [FilterType.PAST]: 'There are no past events now',\n};\n\nconst createNoWaypointTemplate = (filterType = 'everything') => {\n  const noWaypointTextValue = NoWaypointTextType[filterType];\n  return `<p class=\"trip-events__msg\">${noWaypointTextValue}</p>`;\n};\n\nexport default class LoadingView extends AbstractView {\n  #filterType = FilterType.EVERYTHING;\n\n  setFilterType(filterType) {\n    this.#filterType = filterType;\n  }\n\n  get template() {\n    return createNoWaypointTemplate(this.#filterType);\n  }\n}\n","export default class Observable {\n  #observers = new Set();\n\n  addObserver(observer) {\n    this.#observers.add(observer);\n  }\n\n  removeObserver(observer) {\n    this.#observers.delete(observer);\n  }\n\n  _notify(event, payload) {\n    this.#observers.forEach((observer) => observer(event, payload));\n  }\n}\n","import AbstractView from '../render/view/abstract.js';\n\nconst createTripInfoTitleTemplate = (destinations) => {\n  let title;\n\n  if (destinations.length > 3) {\n    title = `${destinations[0]} &mdash; &hellip; &mdash; ${\n      destinations[destinations.length - 1]\n    }`;\n  }\n\n  if (destinations.length <= 3) {\n    title = destinations.join(' &mdash; ');\n  }\n\n  return `<h1 class=\"trip-info__title\">${title}</h1>`;\n};\n\nconst createTripInfoDatesTemplate = (dates) => {\n  const startDate = dates[0].dateFrom.toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n  });\n  const endDate = dates[[dates.length - 1]].dateTo.toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n  });\n\n  return `<p class=\"trip-info__dates\">${startDate}&nbsp;&mdash;&nbsp;${endDate}</p>`;\n};\n\nconst createTripInfoTemplate = (waypoints) => {\n  const destinations = waypoints.map((waypoint) => waypoint.destination);\n  const dates = waypoints.map((waypoint) => ({\n    dateFrom: waypoint.dateFrom,\n    dateTo: waypoint.dateTo,\n  }));\n  const cost = waypoints.reduce(\n    (totalPrice, waypoint) => totalPrice + waypoint.price,\n    0\n  );\n  return `<section class=\"trip-main__trip-info  trip-info\">\n    <div class=\"trip-info__main\">\n      ${createTripInfoTitleTemplate(destinations)}\n\n      ${waypoints.length ? createTripInfoDatesTemplate(dates) : ''}\n    </div>\n\n    <p class=\"trip-info__cost\">\n      Total: &euro;&nbsp;<span class=\"trip-info__cost-value\">${cost}</span>\n    </p>\n  </section>`;\n};\n\nexport default class TripInfoView extends AbstractView {\n  #waypoints = null;\n\n  constructor(waypoints) {\n    super();\n    this.#waypoints = waypoints;\n  }\n\n  get template() {\n    return createTripInfoTemplate(this.#waypoints);\n  }\n}\n","import AbstractView from '../render/view/abstract.js';\n\nconst createFilterItemTemplate = (filter, currentFilterType) => {\n  const { type, count } = filter;\n\n  return `<div class=\"trip-filters__filter\">\n      <input id=\"filter-${type}\"\n      class=\"trip-filters__filter-input\n      visually-hidden\"\n      type=\"radio\"\n      name=\"trip-filter\"\n      value=\"${type}\"\n      ${type === currentFilterType ? 'checked' : ''}\n      ${count === 0 ? 'disabled' : ''}\n    >\n      <label class=\"trip-filters__filter-label\" for=\"filter-${type}\">${type}</label>\n    </div>`;\n};\n\nconst createFilterTemplate = (filters, currentFilterType) => {\n  const filterItemsTemplate = filters.reduce(\n    (template, filter) =>\n      `${template} ${createFilterItemTemplate(filter, currentFilterType)}`,\n    ''\n  );\n\n  return `<form class=\"trip-filters\" action=\"#\" method=\"get\">\n      ${filterItemsTemplate}\n      <button class=\"visually-hidden\" type=\"submit\">Accept filter</button>\n    </form>`;\n};\n\nexport default class FilterView extends AbstractView {\n  #filters = null;\n  #currentFilter = null;\n  #handleFilterTypeChange = null;\n\n  constructor({ filters, currentFilterType, onFilterTypeChange }) {\n    super();\n    this.#filters = filters;\n    this.#currentFilter = currentFilterType;\n    this.#handleFilterTypeChange = onFilterTypeChange;\n\n    this.element.addEventListener('change', this.#filterTypeChangeHandler);\n  }\n\n  get template() {\n    return createFilterTemplate(this.#filters, this.#currentFilter);\n  }\n\n  #filterTypeChangeHandler = (event) => {\n    event.preventDefault();\n    this.#handleFilterTypeChange(event.target.value);\n  };\n}\n","import SortPresenter from './presenter/sort.js';\nimport WaypointListPresenter from './presenter/waypoint-list.js';\nimport WaypointsModel from './model/waypoints.js';\nimport TripInfoPresenter from './presenter/trip-info.js';\nimport FilterPresenter from './presenter/filter.js';\nimport FilterModel from './model/filter.js';\nimport SortModel from './model/sort.js';\n\nconst siteMainElement = document.querySelector('.trip-events');\nconst headerMain = document.querySelector('.trip-main');\nconst filterContainer = document.querySelector('.trip-controls__filters');\nconst newWaypointButton = document.querySelector('.trip-main__event-add-btn');\n\nconst handleNewWaypointFormClose = () => {\n  newWaypointButton.disabled = false;\n};\n\nconst waypointsModel = new WaypointsModel();\n\nconst filterModel = new FilterModel();\nconst sortModel = new SortModel();\n\nconst tripInfoPresenter = new TripInfoPresenter({\n  tripInfoContainer: headerMain,\n  waypointsModel,\n});\n\nconst filterPresenter = new FilterPresenter({\n  filterContainer,\n  filterModel,\n  waypointsModel,\n});\n\nconst sortPresenter = new SortPresenter({\n  sortContainer: siteMainElement,\n  sortModel,\n  waypointsModel,\n});\n\nconst waypointListPresenter = new WaypointListPresenter({\n  waypointListContainer: siteMainElement,\n  waypointsModel,\n  filterModel,\n  sortModel,\n  onNewWaypointDestroy: handleNewWaypointFormClose,\n});\n\nwaypointListPresenter.init();\nfilterPresenter.init();\nsortPresenter.init();\ntripInfoPresenter.init();\nwaypointsModel.init();\n\nnewWaypointButton.addEventListener('click', (event) => {\n  event.preventDefault();\n  waypointListPresenter.createWaypoint();\n  newWaypointButton.disabled = true;\n});\n","import Observable from '../render/observable.js';\nimport { getWaypoints } from '../mock/waypoint.js';\nimport { getMockOffers } from '../mock/offer.js';\nimport { getMockDestinations } from '../mock/destionation.js';\nimport { UpdateType } from '../const.js';\n\nexport default class WaypointsModel extends Observable {\n  #waypoints = [];\n  #offers = [];\n  #destinations = [];\n\n  get waypoints() {\n    return this.#waypoints;\n  }\n\n  get offers() {\n    return this.#offers;\n  }\n\n  get destinations() {\n    return this.#destinations;\n  }\n\n  //  tripinfo\n  getOffersByType(type) {\n    const requiredOffer = this.#offers.find((offer) => offer.type === type);\n    return [...requiredOffer.offers];\n  }\n\n  // getOffersTypes() {\n  //   return this.#offers.map((offer) => offer.type);\n  // }\n\n  // getDestinationsNames() {\n  //   return this.#destinations.map((destination) => destination.name);\n  // }\n\n  //  tripinfo\n  getDestinationById(id) {\n    const requiredDestination = this.#destinations.find(\n      (item) => item.id === id\n    );\n    return { ...requiredDestination };\n  }\n\n  init() {\n    const waypoints = getWaypoints();\n    const offers = getMockOffers();\n    const destinations = getMockDestinations();\n\n    this.#offers = offers;\n    this.#destinations = destinations;\n    this.#waypoints = waypoints.map(this.#adaptToClient);\n\n    this._notify(UpdateType.INIT);\n  }\n\n  updateWaypoint(updateType, update) {\n    const index = this.#waypoints.findIndex(\n      (waypoint) => waypoint.id === update.id\n    );\n\n    if (index === -1) {\n      throw new Error('Can not update unexisting waypoint');\n    }\n\n    this.#waypoints = [\n      ...this.#waypoints.slice(0, index),\n      update,\n      ...this.#waypoints.slice(index + 1),\n    ];\n\n    this._notify(updateType, update);\n  }\n\n  addWaypoint(updateType, update) {\n    update.id = +new Date();\n    this.#waypoints = [...this.#waypoints, update];\n    this._notify(updateType, update);\n  }\n\n  deleteWaypoint(updateType, update) {\n    const index = this.#waypoints.findIndex(\n      (waypoint) => waypoint.id === update.id\n    );\n\n    if (index === -1) {\n      throw new Error('Can not update unexisting waypoint');\n    }\n\n    this.#waypoints = [\n      ...this.#waypoints.slice(0, index),\n      ...this.#waypoints.slice(index + 1),\n    ];\n\n    this._notify(updateType, update);\n  }\n\n  #adaptToClient = (waypoint) => {\n    const adaptedWaypoint = {\n      ...waypoint,\n      basePrice: waypoint['base_price'],\n      dateFrom: new Date(waypoint['date_from']),\n      dateTo: new Date(waypoint['date_to']),\n      isFavorite: waypoint['is_favorite'],\n    };\n\n    delete adaptedWaypoint['base_price'];\n    delete adaptedWaypoint['date_from'];\n    delete adaptedWaypoint['date_to'];\n    delete adaptedWaypoint['is_favorite'];\n\n    return adaptedWaypoint;\n  };\n}\n","const getMockOffers = () => [\n  {\n    type: 'taxi',\n    offers: [\n      {\n        id: 'b4c3e4e6-9053-42ce-b747-e281314baa31_taxi_1',\n        title: 'Upgrade to a business class',\n        price: 120,\n      },\n      {\n        id: 'b4c3e4e6-9053-42ce-b747-e281314baa31_taxi_2',\n        title: 'aux',\n        price: 50,\n      },\n    ],\n  },\n  {\n    type: 'flight',\n    offers: [\n      {\n        id: 'b4c3e4e6-9053-42ce-b747-e281314baa31_flight_1',\n        title: 'Add luggage',\n        price: 50,\n      },\n      {\n        id: 'b4c3e4e6-9053-42ce-b747-e281314baa31_flight_2',\n        title: 'Switch to comfort',\n        price: 80,\n      },\n    ],\n  },\n  {\n    type: 'drive',\n    offers: [\n      {\n        id: 'b4c3e4e6-9053-42ce-b747-e281314baa31_drive_1',\n        title: 'Rent a car',\n        price: 200,\n      },\n    ],\n  },\n  {\n    type: 'check-in',\n    offers: [\n      {\n        id: 'b4c3e4e6-9053-42ce-b747-e281314baa31_check-in_1',\n        title: 'Add breakfast',\n        price: 50,\n      },\n    ],\n  },\n  {\n    type: 'sightseeing',\n    offers: [\n      {\n        id: 'b4c3e4e6-9053-42ce-b747-e281314baa31_sightseeing_1',\n        title: 'Book tickets',\n        price: 40,\n      },\n      {\n        id: 'b4c3e4e6-9053-42ce-b747-e281314baa31_sightseeing_2',\n        title: 'Lunch in city',\n        price: 30,\n      },\n    ],\n  },\n];\n\nexport { getMockOffers };\n","const getMockDestinations = () => [\n  {\n    id: 'cfe416cq-10xa-ye10-8077-2fs9a01edcab_1',\n    description:\n      'Chamonix, is a beautiful city, a true asian pearl, with crowded streets.',\n    name: 'Chamonix',\n    pictures: [\n      {\n        src: 'img/photos/1.jpg',\n        description: 'Chamonix parliament building',\n      },\n    ],\n  },\n  {\n    id: 'cfe416cq-10xa-ye10-8077-2fs9a01edcab_2',\n    description:\n      'Amsterdam, is a beautiful city, a true asian pearl, with crowded streets.',\n    name: 'Amsterdam',\n    pictures: [\n      {\n        src: 'img/photos/2.jpg',\n        description: 'Amsterdam parliament building',\n      },\n      {\n        src: 'img/photos/3.jpg',\n        description: 'Amsterdam parliament building',\n      },\n    ],\n  },\n  {\n    id: 'cfe416cq-10xa-ye10-8077-2fs9a01edcab_3',\n    description:\n      'Geneva, is a beautiful city, a true asian pearl, with crowded streets.',\n    name: 'Geneva',\n    pictures: [\n      {\n        src: 'img/photos/4.jpg',\n        description: 'Geneva parliament building',\n      },\n      {\n        src: 'img/photos/5.jpg',\n        description: 'Geneva parliament building',\n      },\n    ],\n  },\n  {\n    id: 'cfe416cq-10xa-ye10-8077-2fs9a01edcab_4',\n    description:\n      'Krasnodar, is a beautiful city, a true asian pearl, with crowded streets.',\n    name: 'Krasnodar',\n    pictures: [],\n  },\n];\n\nexport { getMockDestinations };\n","const getWaypoints = () => [\n  {\n    id: 'f4b62099-293f-4c3d-a702-94eec4a2808c_A',\n    'base_price': 1100,\n    'date_from': '2019-07-10T22:55:56.845Z',\n    'date_to': '2019-07-11T11:22:13.375Z',\n    destination: 'cfe416cq-10xa-ye10-8077-2fs9a01edcab_1',\n    'is_favorite': false,\n    offers: ['b4c3e4e6-9053-42ce-b747-e281314baa31_taxi_1'],\n    type: 'taxi',\n  },\n  {\n    id: 'f4b62099-293f-4c3d-a702-94eec4a2808c_B',\n    'base_price': 500,\n    'date_from': '2019-07-12T10:55:56.845Z',\n    'date_to': '2019-07-12T11:22:13.375Z',\n    destination: 'cfe416cq-10xa-ye10-8077-2fs9a01edcab_2',\n    'is_favorite': true,\n    offers: [\n      'b4c3e4e6-9053-42ce-b747-e281314baa31_flight_1',\n      'b4c3e4e6-9053-42ce-b747-e281314baa31_flight_2',\n    ],\n    type: 'flight',\n  },\n  {\n    id: 'f4b62099-293f-4c3d-a702-94eec4a2808c_C',\n    'base_price': 2400,\n    'date_from': '2019-08-15T22:55:56.845Z',\n    'date_to': '2019-08-20T11:22:13.375Z',\n    destination: 'cfe416cq-10xa-ye10-8077-2fs9a01edcab_1',\n    'is_favorite': false,\n    offers: ['b4c3e4e6-9053-42ce-b747-e281314baa31_drive_1'],\n    type: 'drive',\n  },\n  {\n    id: 'f4b62099-293f-4c3d-a702-94eec4a2808c_D',\n    'base_price': 155,\n    'date_from': '2019-08-21T08:55:56.845Z',\n    'date_to': '2019-08-21T11:00:00.375Z',\n    destination: 'cfe416cq-10xa-ye10-8077-2fs9a01edcab_4',\n    'is_favorite': true,\n    offers: [\n      'b4c3e4e6-9053-42ce-b747-e281314baa31_sightseeing_1',\n      'b4c3e4e6-9053-42ce-b747-e281314baa31_sightseeing_2',\n    ],\n    type: 'sightseeing',\n  },\n];\n\nexport { getWaypoints };\n","import Observable from '../render/observable.js';\nimport { FilterType } from '../const.js';\n\nexport default class FilterModel extends Observable {\n  #filter = FilterType.EVERYTHING;\n\n  get filter() {\n    return this.#filter;\n  }\n\n  setFilter(updateType, filter) {\n    this.#filter = filter;\n    this._notify(updateType, filter);\n  }\n}\n","import Observable from '../render/observable.js';\nimport { SortType } from '../const.js';\n\nexport default class SortModel extends Observable {\n  #sort = SortType.DAY;\n\n  get sort() {\n    return this.#sort;\n  }\n\n  setSort(updateType, sort) {\n    this.#sort = sort;\n    this._notify(updateType, sort);\n  }\n}\n","import TripInfoView from '../view/trip-info.js';\nimport { remove, render, RenderPosition, replace } from '../render/render.js';\nimport { sort } from '../util.js';\nimport { SortType } from '../const.js';\n\nexport default class TripInfoPresenter {\n  #waypointsModel = null;\n\n  #tripInfoComponent = null;\n  #tripInfoContainer = null;\n\n  constructor({ tripInfoContainer, waypointsModel }) {\n    this.#tripInfoContainer = tripInfoContainer;\n    this.#waypointsModel = waypointsModel;\n\n    this.#waypointsModel.addObserver(this.#handleModelEvent);\n  }\n\n  init() {\n    const waypoints = this.#waypointsModel.waypoints;\n    const sortedWaypoints = waypoints.sort(sort[SortType.DAY]);\n\n    const reducedWaypoints = sortedWaypoints.map((waypoint) => {\n      const destinationName = this.#waypointsModel.getDestinationById(\n        waypoint.destination\n      ).name;\n      const selectedOffersPrice = this.#waypointsModel\n        .getOffersByType(waypoint.type)\n        .filter((offer) => waypoint.offers.includes(offer.id))\n        .reduce((totalPrice, offer) => totalPrice + offer.price, 0);\n\n      return {\n        dateFrom: waypoint.dateFrom,\n        dateTo: waypoint.dateTo,\n        destination: destinationName,\n        price: waypoint.basePrice + selectedOffersPrice,\n      };\n    });\n\n    const prevTripInfoComponent = this.#tripInfoComponent;\n\n    this.#tripInfoComponent = new TripInfoView(reducedWaypoints);\n\n    if (!prevTripInfoComponent) {\n      render(\n        this.#tripInfoComponent,\n        this.#tripInfoContainer,\n        RenderPosition.AFTERBEGIN\n      );\n      return;\n    }\n\n    replace(this.#tripInfoComponent, prevTripInfoComponent);\n    remove(prevTripInfoComponent);\n  }\n\n  #handleModelEvent = () => {\n    this.init();\n  };\n}\n","import FilterView from '../view/filter.js';\nimport { remove, render, replace } from '../render/render.js';\nimport { FilterType, UpdateType } from '../const.js';\nimport { filter } from '../util.js';\n\nexport default class FilterPresenter {\n  #filterContainer = null;\n\n  #filterModel = null;\n  #waypointsModel = null;\n\n  #filterComponent = null;\n\n  constructor({ filterContainer, filterModel, waypointsModel }) {\n    this.#filterContainer = filterContainer;\n    this.#filterModel = filterModel;\n    this.#waypointsModel = waypointsModel;\n\n    this.#waypointsModel.addObserver(this.#handleModelEvent);\n    this.#filterModel.addObserver(this.#handleModelEvent);\n  }\n\n  get filters() {\n    const waypoints = this.#waypointsModel.waypoints;\n\n    return Object.values(FilterType).map((type) => ({\n      type,\n      count: filter[type](waypoints).length,\n    }));\n  }\n\n  init() {\n    const prevFilterComponent = this.#filterComponent;\n\n    this.#filterComponent = new FilterView({\n      filters: this.filters,\n      currentFilterType: this.#filterModel.filter,\n      onFilterTypeChange: this.#handleFilterTypeChange,\n    });\n\n    if (!prevFilterComponent) {\n      render(this.#filterComponent, this.#filterContainer);\n      return;\n    }\n\n    replace(this.#filterComponent, prevFilterComponent);\n    remove(prevFilterComponent);\n  }\n\n  #handleModelEvent = () => {\n    this.init();\n  };\n\n  #handleFilterTypeChange = (filterType) => {\n    if (this.#filterModel.filter === filterType) {\n      return;\n    }\n\n    this.#filterModel.setFilter(UpdateType.MAJOR, filterType);\n  };\n}\n","import SortView from '../view/sort.js';\nimport { remove, render, RenderPosition, replace } from '../render/render.js';\nimport { SortItems, SortType, UpdateType } from '../const.js';\n\nexport default class SortPresenter {\n  #sortContainer = null;\n\n  #sortModel = null;\n  #waypointsModel = null;\n\n  #sortComponent = null;\n\n  constructor({ sortContainer, sortModel, waypointsModel }) {\n    this.#sortContainer = sortContainer;\n    this.#sortModel = sortModel;\n    this.#waypointsModel = waypointsModel;\n\n    this.#waypointsModel.addObserver(this.#handleModelEvent);\n    this.#sortModel.addObserver(this.#handleModelEvent);\n  }\n\n  get sortTypes() {\n    return Object.values(SortType).map((type) => type);\n  }\n\n  get sortItems() {\n    return Object.values(SortItems).map((item) => item);\n  }\n\n  init() {\n    const sortTypes = this.sortTypes;\n    const sortItems = this.sortItems;\n    const prevSortComponent = this.#sortComponent;\n\n    this.#sortComponent = new SortView({\n      sortTypes,\n      sortItems,\n      currentSort: this.#sortModel.sort,\n      onSortChange: this.#handleSortChange,\n    });\n\n    if (!prevSortComponent) {\n      render(\n        this.#sortComponent,\n        this.#sortContainer,\n        RenderPosition.AFTERBEGIN\n      );\n      return;\n    }\n\n    replace(this.#sortComponent, prevSortComponent);\n    remove(prevSortComponent);\n  }\n\n  #handleSortChange = (sortType) => {\n    if (this.#sortModel.sort === sortType) {\n      return;\n    }\n\n    this.#sortModel.setSort(UpdateType.MINOR, sortType);\n  };\n\n  #handleModelEvent = () => {\n    this.init();\n  };\n}\n","import WaypointPresenter from './waypoint.js';\nimport newWaypointPresenter from './new-waypoint-presenter.js';\nimport LoadingView from '../view/loading.js';\nimport WaypointListView from '../view/waypoint-list.js';\nimport NoWaypointView from '../view/no-waypoint.js';\nimport { remove, render } from '../render/render.js';\nimport { FilterType, SortType, UpdateType, UserAction } from '../const.js';\nimport { filter, sort } from '../util.js';\n\nexport default class WaypointListPresenter {\n  #waypointListContainer = null;\n\n  #waypointsModel = null;\n  #filterModel = null;\n  #sortModel = null;\n\n  #newWaypointPresenter = null;\n\n  #waypointListComponent = new WaypointListView();\n  #loadingComponent = new LoadingView();\n  #noWaypointComponent = new NoWaypointView();\n\n  #filterType = FilterType.EVERYTHING;\n  #sortType = SortType.DAY;\n  #waypointPresenters = new Map();\n  #isLoading = true;\n\n  constructor({\n    waypointListContainer,\n    waypointsModel,\n    filterModel,\n    sortModel,\n    onNewWaypointDestroy,\n  }) {\n    this.#waypointListContainer = waypointListContainer;\n    this.#waypointsModel = waypointsModel;\n    this.#filterModel = filterModel;\n    this.#sortModel = sortModel;\n\n    this.#newWaypointPresenter = new newWaypointPresenter({\n      waypointListContainer: this.#waypointListContainer,\n      onDataChange: this.#handleViewAction,\n      onDestroy: onNewWaypointDestroy,\n    });\n\n    this.#waypointsModel.addObserver(this.#handleModelEvent);\n    this.#filterModel.addObserver(this.#handleModelEvent);\n    this.#sortModel.addObserver(this.#handleModelEvent);\n  }\n\n  get waypoints() {\n    this.#filterType = this.#filterModel.filter;\n    this.#sortType = this.#sortModel.sort;\n    const waypoints = this.#waypointsModel.waypoints;\n    const filteredWaypoints = filter[this.#filterType](waypoints);\n\n    const sortedWaypoints = filteredWaypoints.sort(sort[this.#sortType]);\n    return sortedWaypoints;\n  }\n\n  init() {\n    this.#renderWaypointList();\n  }\n\n  createWaypoint() {\n    const offers = this.#waypointsModel.offers;\n    const destinations = this.#waypointsModel.destinations;\n    this.#filterModel.setFilter(UpdateType.MAJOR, FilterType.EVERYTHING);\n    this.#sortModel.setSort(UpdateType.MAJOR, SortType.DAY);\n    this.#newWaypointPresenter.init({ offers, destinations });\n  }\n\n  #handleModeChange = () => {\n    this.#newWaypointPresenter.destroy();\n    this.#waypointPresenters.forEach((presenter) => presenter.resetView());\n  };\n\n  #handleViewAction = (actionType, updateType, update) => {\n    switch (actionType) {\n      case UserAction.ADD_WAYPOINT:\n        this.#waypointsModel.addWaypoint(updateType, update);\n        break;\n      case UserAction.DELETE_WAYPOINT:\n        this.#waypointsModel.deleteWaypoint(updateType, update);\n        break;\n      case UserAction.UPDATE_WAYPOINT:\n        this.#waypointPresenters.get(update.id).setSaving();\n        this.#waypointsModel.updateWaypoint(updateType, update);\n        break;\n    }\n  };\n\n  #handleModelEvent = (updateType, data) => {\n    switch (updateType) {\n      case UpdateType.PATCH:\n        this.#waypointPresenters.get(data.id).init(data);\n        break;\n      case UpdateType.MINOR:\n        this.#clearWaypointList();\n        this.#renderWaypointList();\n        break;\n      case UpdateType.MAJOR:\n        this.#clearWaypointList({ resetSortType: true });\n        this.#renderWaypointList();\n        break;\n      case UpdateType.INIT:\n        this.#isLoading = false;\n        remove(this.#loadingComponent);\n        this.#renderWaypointList();\n        break;\n    }\n  };\n\n  #renderWaypointList() {\n    if (this.#isLoading) {\n      this.#renderLoading();\n      return;\n    }\n\n    const waypoints = this.waypoints;\n    const waypointsLength = waypoints.length;\n\n    if (waypointsLength === 0) {\n      this.#renderNoWaypoints();\n      return;\n    }\n    render(this.#waypointListComponent, this.#waypointListContainer);\n    this.#renderWaypoints(this.waypoints);\n  }\n\n  #clearWaypointList({ resetSortType = false } = {}) {\n    if (resetSortType) {\n      this.#sortModel.setSort(UpdateType.MINOR, SortType.DAY);\n    }\n\n    this.#newWaypointPresenter.destroy();\n    this.#waypointPresenters.forEach((presenter) => presenter.destroy());\n    this.#waypointPresenters.clear();\n\n    if (this.#loadingComponent) {\n      remove(this.#loadingComponent);\n    }\n\n    if (this.#noWaypointComponent) {\n      remove(this.#noWaypointComponent);\n    }\n  }\n\n  #renderLoading() {\n    render(this.#loadingComponent, this.#waypointListContainer);\n  }\n\n  #renderNoWaypoints() {\n    this.#noWaypointComponent.setFilterType(this.#filterType);\n    render(this.#noWaypointComponent, this.#waypointListContainer);\n  }\n\n  #renderWaypoints(waypoints) {\n    waypoints.forEach((waypoint) => this.#renderWaypoint(waypoint));\n  }\n\n  #renderWaypoint(waypoint) {\n    const offers = this.#waypointsModel.offers;\n    const destinations = this.#waypointsModel.destinations;\n\n    const waypointPresenter = new WaypointPresenter({\n      waypointListContainer: this.#waypointListComponent.element,\n      onDataChange: this.#handleViewAction,\n      onModeChange: this.#handleModeChange,\n    });\n    waypointPresenter.init({ waypoint, offers, destinations });\n    this.#waypointPresenters.set(waypoint.id, waypointPresenter);\n  }\n}\n"],"names":["RenderPosition","render","component","container","place","insertAdjacentElement","element","replace","newComponent","oldComponent","AbstractView","Error","newElement","oldElement","parent","parentElement","replaceChild","remove","removeElement","constructor","this","template","document","createElement","innerHTML","firstElementChild","SortView","sortTypes","sortItems","currentSort","onSortChange","super","addEventListener","reduce","sortItem","createSortItemTemplate","includes","createSortTemplate","event","preventDefault","sortType","target","value","split","FilterType","EVERYTHING","FUTURE","PRESENT","PAST","SortType","DAY","TIME","PRICE","SortItems","EVENT","OFFERS","TimeUnits","DAYS","HOURS","MINUTES","UpdateType","UserAction","AbstractStatefulView","_state","updateElement","update","_setState","_restoreHandlers","structuredClone","prevElement","BLANK_WAYPOINT","basePrice","dateFrom","dateTo","destination","isFavorite","offers","type","WaypointEditView","waypoint","destinations","onRollupClick","onFormSubmit","onFormDeleteClick","parseWaypointToState","createWaypointEditTemplate","eventTypes","map","offer","waypointDestination","filter","dest","id","destinationsNames","name","waypointOffers","startDate","toLocaleString","hour","minute","hour12","day","month","year","join","endDate","eventType","createEventTypeItemTemplate","createEventTypeItemsTemplate","createDestinationListItemTemplate","createDestinationList","createRollupButton","createOffersTemplate","length","offersTemplate","createOfferTemplate","offersChecked","title","price","pictures","description","photo","src","createDestinationPhotoTemplate","reset","querySelector","destinationName","destinationId","classList","contains","checkedOffers","querySelectorAll","checked","Date","parseStateToWaypoint","state","isSaving","isDisabled","isDeleting","durationInTimeUnits","durationInMiliseconds","Math","floor","waypoints","sort","waypointA","waypointB","durationA","WaypointView","onFavoriteClick","createWaypointTemplate","date","toISOString","slice","startDateTime","endDateTime","startTime","endTime","duration","getDuration","eventDate","eventEndDate","Object","values","result","unit","currentUnitDuration","getTimeDifference","trim","favoriteClassName","createOffersListItemTemplate","createOffersListTemplate","Mode","WaypointPresenter","waypointListContainer","onDataChange","onModeChange","init","prevWaypointComponent","prevWaypointEditComponent","destroy","setSaving","setDeleting","resetView","key","#handleRollupClick","#handleFavoriteClick","removeEventListener","newWaypointPresenter","onDestroy","isNewWaypoint","updeteElement","#handleFormDeleteClick","LoadingView","WaypointListView","NoWaypointTextType","setFilterType","filterType","createNoWaypointTemplate","Observable","Set","addObserver","observer","add","removeObserver","delete","_notify","payload","forEach","TripInfoView","dates","cost","totalPrice","createTripInfoTitleTemplate","createTripInfoDatesTemplate","createTripInfoTemplate","FilterView","filters","currentFilterType","onFilterTypeChange","createFilterTemplate","filterItemsTemplate","createFilterItemTemplate","count","siteMainElement","headerMain","filterContainer","newWaypointButton","waypointsModel","getOffersByType","find","getDestinationById","item","updateWaypoint","updateType","index","findIndex","addWaypoint","deleteWaypoint","adaptedWaypoint","filterModel","setFilter","sortModel","setSort","tripInfoPresenter","tripInfoContainer","reducedWaypoints","selectedOffersPrice","prevTripInfoComponent","#handleModelEvent","filterPresenter","prevFilterComponent","sortPresenter","sortContainer","prevSortComponent","waypointListPresenter","NoWaypointView","Map","onNewWaypointDestroy","createWaypoint","#handleModeChange","presenter","#handleViewAction","actionType","get","data","resetSortType","clear","waypointPresenter","set","handleNewWaypointFormClose","disabled"],"sourceRoot":""}